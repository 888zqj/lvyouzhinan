import{F as X,_ as Y,d as L,M as ae,a as Z,bZ as oe,v as d,c as _,by as le,aC as j,cs as F,o as T,j as D,k as Q,x as ne,z as W,n as C,e as m,f as $,ay as re,T as ie,aG as ee,b as te,l as I,a5 as ce,ag as ue,J as H,cv as K,a2 as U,bz as fe,S as G,$ as ve,a0 as de,s as me,c3 as pe,r as he,au as ye,t as be,bG as ge,w as we,aI as Se}from"./index-de307950.js";const E=4,ze={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Ee=({move:t,size:s,bar:a})=>({[a.size]:s,transform:`translate${a.axis}(${t}%)`}),se=Symbol("scrollbarContextKey"),_e=X({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),ke="Thumb",He=L({__name:"thumb",props:_e,setup(t){const s=t,a=ae(se),o=Z("scrollbar");a||oe(ke,"can not inject scrollbar context");const i=d(),u=d(),r=d({}),v=d(!1);let n=!1,p=!1,h=ee?document.onselectstart:null;const l=_(()=>ze[s.vertical?"vertical":"horizontal"]),b=_(()=>Ee({size:s.size,move:s.move,bar:l.value})),g=_(()=>i.value[l.value.offset]**2/a.wrapElement[l.value.scrollSize]/s.ratio/u.value[l.value.offset]),w=c=>{var e;if(c.stopPropagation(),c.ctrlKey||[1,2].includes(c.button))return;(e=window.getSelection())==null||e.removeAllRanges(),M(c);const f=c.currentTarget;f&&(r.value[l.value.axis]=f[l.value.offset]-(c[l.value.client]-f.getBoundingClientRect()[l.value.direction]))},N=c=>{if(!u.value||!i.value||!a.wrapElement)return;const e=Math.abs(c.target.getBoundingClientRect()[l.value.direction]-c[l.value.client]),f=u.value[l.value.offset]/2,S=(e-f)*100*g.value/i.value[l.value.offset];a.wrapElement[l.value.scroll]=S*a.wrapElement[l.value.scrollSize]/100},M=c=>{c.stopImmediatePropagation(),n=!0,document.addEventListener("mousemove",R),document.addEventListener("mouseup",z),h=document.onselectstart,document.onselectstart=()=>!1},R=c=>{if(!i.value||!u.value||n===!1)return;const e=r.value[l.value.axis];if(!e)return;const f=(i.value.getBoundingClientRect()[l.value.direction]-c[l.value.client])*-1,S=u.value[l.value.offset]-e,k=(f-S)*100*g.value/i.value[l.value.offset];a.wrapElement[l.value.scroll]=k*a.wrapElement[l.value.scrollSize]/100},z=()=>{n=!1,r.value[l.value.axis]=0,document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",z),B(),p&&(v.value=!1)},O=()=>{p=!1,v.value=!!s.size},A=()=>{p=!0,v.value=n};le(()=>{B(),document.removeEventListener("mouseup",z)});const B=()=>{document.onselectstart!==h&&(document.onselectstart=h)};return j(F(a,"scrollbarElement"),"mousemove",O),j(F(a,"scrollbarElement"),"mouseleave",A),(c,e)=>(T(),D(ie,{name:m(o).b("fade"),persisted:""},{default:Q(()=>[ne(W("div",{ref_key:"instance",ref:i,class:C([m(o).e("bar"),m(o).is(m(l).key)]),onMousedown:N},[W("div",{ref_key:"thumb",ref:u,class:C(m(o).e("thumb")),style:$(m(b)),onMousedown:w},null,38)],34),[[re,c.always||v.value]])]),_:1},8,["name"]))}});var V=Y(He,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Te=X({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Ce=L({__name:"bar",props:Te,setup(t,{expose:s}){const a=t,o=d(0),i=d(0);return s({handleScroll:r=>{if(r){const v=r.offsetHeight-E,n=r.offsetWidth-E;i.value=r.scrollTop*100/v*a.ratioY,o.value=r.scrollLeft*100/n*a.ratioX}}}),(r,v)=>(T(),te(ce,null,[I(V,{move:o.value,ratio:r.ratioX,size:r.width,always:r.always},null,8,["move","ratio","size","always"]),I(V,{move:i.value,ratio:r.ratioY,size:r.height,vertical:"",always:r.always},null,8,["move","ratio","size","always"])],64))}});var Re=Y(Ce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Be=X({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ue([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Pe={scroll:({scrollTop:t,scrollLeft:s})=>[t,s].every(H)},xe="ElScrollbar",Le=L({name:xe}),Ne=L({...Le,props:Be,emits:Pe,setup(t,{expose:s,emit:a}){const o=t,i=Z("scrollbar");let u,r;const v=d(),n=d(),p=d(),h=d("0"),l=d("0"),b=d(),g=d(1),w=d(1),N=_(()=>{const e={};return o.height&&(e.height=K(o.height)),o.maxHeight&&(e.maxHeight=K(o.maxHeight)),[o.wrapStyle,e]}),M=_(()=>[o.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!o.native}]),R=_(()=>[i.e("view"),o.viewClass]),z=()=>{var e;n.value&&((e=b.value)==null||e.handleScroll(n.value),a("scroll",{scrollTop:n.value.scrollTop,scrollLeft:n.value.scrollLeft}))};function O(e,f){ge(e)?n.value.scrollTo(e):H(e)&&H(f)&&n.value.scrollTo(e,f)}const A=e=>{H(e)&&(n.value.scrollTop=e)},B=e=>{H(e)&&(n.value.scrollLeft=e)},c=()=>{if(!n.value)return;const e=n.value.offsetHeight-E,f=n.value.offsetWidth-E,S=e**2/n.value.scrollHeight,k=f**2/n.value.scrollWidth,P=Math.max(S,o.minSize),x=Math.max(k,o.minSize);g.value=S/(e-S)/(P/(e-P)),w.value=k/(f-k)/(x/(f-x)),l.value=P+E<e?`${P}px`:"",h.value=x+E<f?`${x}px`:""};return U(()=>o.noresize,e=>{e?(u==null||u(),r==null||r()):({stop:u}=fe(p,c),r=j("resize",c))},{immediate:!0}),U(()=>[o.maxHeight,o.height],()=>{o.native||G(()=>{var e;c(),n.value&&((e=b.value)==null||e.handleScroll(n.value))})}),ve(se,de({scrollbarElement:v,wrapElement:n})),me(()=>{o.native||G(()=>{c()})}),pe(()=>c()),s({wrapRef:n,update:c,scrollTo:O,setScrollTop:A,setScrollLeft:B,handleScroll:z}),(e,f)=>(T(),te("div",{ref_key:"scrollbarRef",ref:v,class:C(m(i).b())},[W("div",{ref_key:"wrapRef",ref:n,class:C(m(M)),style:$(m(N)),onScroll:z},[(T(),D(ye(e.tag),{ref_key:"resizeRef",ref:p,class:C(m(R)),style:$(e.viewStyle)},{default:Q(()=>[he(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?be("v-if",!0):(T(),D(Re,{key:0,ref_key:"barRef",ref:b,height:l.value,width:h.value,always:e.always,"ratio-x":w.value,"ratio-y":g.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Me=Y(Ne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Ae=we(Me);var je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function De(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const y=new Map;let q;ee&&(document.addEventListener("mousedown",t=>q=t),document.addEventListener("mouseup",t=>{for(const s of y.values())for(const{documentHandler:a}of s)a(t,q)}));function J(t,s){let a=[];return Array.isArray(s.arg)?a=s.arg:Se(s.arg)&&a.push(s.arg),function(o,i){const u=s.instance.popperRef,r=o.target,v=i==null?void 0:i.target,n=!s||!s.instance,p=!r||!v,h=t.contains(r)||t.contains(v),l=t===r,b=a.length&&a.some(w=>w==null?void 0:w.contains(r))||a.length&&a.includes(v),g=u&&(u.contains(r)||u.contains(v));n||p||h||l||b||g||s.value(o,i)}}const We={beforeMount(t,s){y.has(t)||y.set(t,[]),y.get(t).push({documentHandler:J(t,s),bindingFn:s.value})},updated(t,s){y.has(t)||y.set(t,[]);const a=y.get(t),o=a.findIndex(u=>u.bindingFn===s.oldValue),i={documentHandler:J(t,s),bindingFn:s.value};o>=0?a.splice(o,1,i):a.push(i)},unmounted(t){y.delete(t)}};export{We as C,Ae as E,je as c,De as g};
